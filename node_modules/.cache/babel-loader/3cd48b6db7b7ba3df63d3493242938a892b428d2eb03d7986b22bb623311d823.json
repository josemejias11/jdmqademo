{"ast":null,"code":"var _jsxFileName = \"/Users/josemejias/WebstormProjects/jdmqademo/src/context/TaskContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:5000/api/tasks';\n// Create the context\nexport const TaskContext = /*#__PURE__*/createContext(undefined);\n\n// Custom hook to use the context\nexport const useTasks = () => {\n  _s();\n  const context = useContext(TaskContext);\n  if (!context) {\n    throw new Error('useTasks must be used within a TaskProvider');\n  }\n  return context;\n};\n_s(useTasks, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n// Provider component\nexport const TaskProvider = ({\n  children\n}) => {\n  _s2();\n  const [tasks, setTasks] = useState([]);\n  const [task, setTask] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Get the auth token for API requests\n  const getAuthToken = () => {\n    return localStorage.getItem('auth_token');\n  };\n\n  // Configure axios with auth token\n  const getAxiosConfig = () => {\n    const token = getAuthToken();\n    return {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n  };\n\n  // Map backend task to frontend task\n  const mapBackendTask = backendTask => {\n    return {\n      id: backendTask.id,\n      text: backendTask.title,\n      done: backendTask.completed\n    };\n  };\n\n  // Load tasks from API on initial load\n  useEffect(() => {\n    const fetchTasks = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const response = await axios.get(API_URL, getAxiosConfig());\n        const backendTasks = response.data;\n        const frontendTasks = backendTasks.map(mapBackendTask);\n        setTasks(frontendTasks);\n      } catch (err) {\n        console.error('Error fetching tasks:', err);\n        setError('Failed to load tasks. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchTasks();\n  }, []);\n\n  // Add a new task via API\n  const addTask = async text => {\n    if (text.trim() === '') return;\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await axios.post(API_URL, {\n        title: text.trim(),\n        description: ''\n      }, getAxiosConfig());\n      const newTask = mapBackendTask(response.data);\n      setTasks([...tasks, newTask]);\n    } catch (err) {\n      console.error('Error adding task:', err);\n      setError('Failed to add task. Please try again later.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Add a new task\n  const handleAddTask = e => {\n    e.preventDefault();\n    addTask(task);\n    setTask('');\n  };\n\n  // Toggle the 'done' status of a task via API\n  const toggleTaskDone = async id => {\n    setLoading(true);\n    setError(null);\n    try {\n      // Find the task to toggle\n      const taskToToggle = tasks.find(t => t.id === id);\n      if (!taskToToggle) {\n        throw new Error('Task not found');\n      }\n\n      // Update the task via API\n      const response = await axios.put(`${API_URL}/${id}`, {\n        completed: !taskToToggle.done\n      }, getAxiosConfig());\n\n      // Update local state\n      const updatedTask = mapBackendTask(response.data);\n      setTasks(tasks.map(t => t.id === id ? updatedTask : t));\n    } catch (err) {\n      console.error('Error toggling task:', err);\n      setError('Failed to update task. Please try again later.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Delete a task via API\n  const deleteTask = async id => {\n    setLoading(true);\n    setError(null);\n    try {\n      await axios.delete(`${API_URL}/${id}`, getAxiosConfig());\n      setTasks(tasks.filter(t => t.id !== id));\n    } catch (err) {\n      console.error('Error deleting task:', err);\n      setError('Failed to delete task. Please try again later.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Values and functions to expose via the context\n  const value = {\n    tasks,\n    task,\n    setTask,\n    handleAddTask,\n    toggleTaskDone,\n    deleteTask,\n    loading,\n    error\n  };\n  return /*#__PURE__*/_jsxDEV(TaskContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 176,\n    columnNumber: 10\n  }, this);\n};\n_s2(TaskProvider, \"JOurdznjjOlR9elv7lzcuFG6O6Q=\");\n_c = TaskProvider;\nvar _c;\n$RefreshReg$(_c, \"TaskProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","axios","jsxDEV","_jsxDEV","API_URL","TaskContext","undefined","useTasks","_s","context","Error","TaskProvider","children","_s2","tasks","setTasks","task","setTask","loading","setLoading","error","setError","getAuthToken","localStorage","getItem","getAxiosConfig","token","headers","Authorization","mapBackendTask","backendTask","id","text","title","done","completed","fetchTasks","response","get","backendTasks","data","frontendTasks","map","err","console","addTask","trim","post","description","newTask","handleAddTask","e","preventDefault","toggleTaskDone","taskToToggle","find","t","put","updatedTask","deleteTask","delete","filter","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/josemejias/WebstormProjects/jdmqademo/src/context/TaskContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport axios, { AxiosResponse, AxiosError } from 'axios';\nimport { Task, BackendTask, ApiError, AxiosAuthConfig } from '../types';\n\nconst API_URL = 'http://localhost:5000/api/tasks';\n\ninterface TaskContextType {\n  tasks: Task[];\n  task: string;\n  setTask: (task: string) => void;\n  handleAddTask: (e: React.FormEvent<HTMLFormElement>) => void;\n  toggleTaskDone: (id: number) => void;\n  deleteTask: (id: number) => void;\n  loading: boolean;\n  error: string | null;\n}\n\n// Create the context\nexport const TaskContext = createContext<TaskContextType | undefined>(undefined);\n\n// Custom hook to use the context\nexport const useTasks = () => {\n  const context = useContext(TaskContext);\n  if (!context) {\n    throw new Error('useTasks must be used within a TaskProvider');\n  }\n  return context;\n};\n\ninterface TaskProviderProps {\n  children: React.ReactNode;\n}\n\n// Provider component\nexport const TaskProvider: React.FC<TaskProviderProps> = ({ children }) => {\n  const [tasks, setTasks] = useState<Task[]>([]);\n  const [task, setTask] = useState<string>('');\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Get the auth token for API requests\n  const getAuthToken = () => {\n    return localStorage.getItem('auth_token');\n  };\n\n  // Configure axios with auth token\n  const getAxiosConfig = () => {\n    const token = getAuthToken();\n    return {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n  };\n\n  // Map backend task to frontend task\n  const mapBackendTask = (backendTask: any): Task => {\n    return {\n      id: backendTask.id,\n      text: backendTask.title,\n      done: backendTask.completed\n    };\n  };\n\n  // Load tasks from API on initial load\n  useEffect(() => {\n    const fetchTasks = async () => {\n      setLoading(true);\n      setError(null);\n\n      try {\n        const response = await axios.get(API_URL, getAxiosConfig());\n        const backendTasks = response.data;\n        const frontendTasks = backendTasks.map(mapBackendTask);\n        setTasks(frontendTasks);\n      } catch (err) {\n        console.error('Error fetching tasks:', err);\n        setError('Failed to load tasks. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchTasks();\n  }, []);\n\n  // Add a new task via API\n  const addTask = async (text: string): Promise<void> => {\n    if (text.trim() === '') return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await axios.post(\n        API_URL, \n        { title: text.trim(), description: '' }, \n        getAxiosConfig()\n      );\n\n      const newTask = mapBackendTask(response.data);\n      setTasks([...tasks, newTask]);\n    } catch (err) {\n      console.error('Error adding task:', err);\n      setError('Failed to add task. Please try again later.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Add a new task\n  const handleAddTask = (e: React.FormEvent<HTMLFormElement>): void => {\n    e.preventDefault();\n    addTask(task);\n    setTask('');\n  };\n\n  // Toggle the 'done' status of a task via API\n  const toggleTaskDone = async (id: number): Promise<void> => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Find the task to toggle\n      const taskToToggle = tasks.find(t => t.id === id);\n      if (!taskToToggle) {\n        throw new Error('Task not found');\n      }\n\n      // Update the task via API\n      const response = await axios.put(\n        `${API_URL}/${id}`, \n        { completed: !taskToToggle.done }, \n        getAxiosConfig()\n      );\n\n      // Update local state\n      const updatedTask = mapBackendTask(response.data);\n      setTasks(tasks.map(t => t.id === id ? updatedTask : t));\n    } catch (err) {\n      console.error('Error toggling task:', err);\n      setError('Failed to update task. Please try again later.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Delete a task via API\n  const deleteTask = async (id: number): Promise<void> => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      await axios.delete(`${API_URL}/${id}`, getAxiosConfig());\n      setTasks(tasks.filter(t => t.id !== id));\n    } catch (err) {\n      console.error('Error deleting task:', err);\n      setError('Failed to delete task. Please try again later.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Values and functions to expose via the context\n  const value = {\n    tasks,\n    task,\n    setTask,\n    handleAddTask,\n    toggleTaskDone,\n    deleteTask,\n    loading,\n    error\n  };\n\n  return <TaskContext.Provider value={value}>{children}</TaskContext.Provider>;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}