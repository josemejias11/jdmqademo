{"ast":null,"code":"var _jsxFileName = \"/Users/josemejias/WebstormProjects/jdmqademo/src/context/TaskContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = '/api/tasks';\n// Create the context\nexport const TaskContext = /*#__PURE__*/createContext(undefined);\n\n// Custom hook to use the context\nexport const useTasks = () => {\n  _s();\n  const context = useContext(TaskContext);\n  if (!context) {\n    throw new Error('useTasks must be used within a TaskProvider');\n  }\n  return context;\n};\n_s(useTasks, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n// Provider component\nexport const TaskProvider = ({\n  children\n}) => {\n  _s2();\n  const [tasks, setTasks] = useState([]);\n  const [task, setTask] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Get the auth token for API requests\n  const getAuthToken = () => localStorage.getItem('auth_token');\n\n  // Configure axios with auth token\n  const getAxiosConfig = useCallback(() => {\n    const token = getAuthToken();\n    return {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n  }, []);\n\n  // Map backend task to frontend task\n  const mapBackendTask = backendTask => ({\n    id: backendTask.id,\n    text: backendTask.title,\n    done: backendTask.completed\n  });\n\n  // Load tasks from API on initial load\n  useEffect(() => {\n    const fetchTasks = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const response = await axios.get(API_URL, getAxiosConfig());\n        const backendTasks = response.data;\n        const frontendTasks = backendTasks.map(mapBackendTask);\n        setTasks(frontendTasks);\n      } catch (err) {\n        var _apiError$response, _apiError$response$da;\n        const apiError = err;\n        console.error('Error fetching tasks:', apiError);\n        setError(((_apiError$response = apiError.response) === null || _apiError$response === void 0 ? void 0 : (_apiError$response$da = _apiError$response.data) === null || _apiError$response$da === void 0 ? void 0 : _apiError$response$da.message) || 'Failed to load tasks. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    void fetchTasks();\n  }, [getAxiosConfig]);\n\n  // Add a new task via API\n  const addTask = async text => {\n    if (text.trim() === '') return;\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await axios.post(API_URL, {\n        title: text.trim(),\n        description: ''\n      }, getAxiosConfig());\n      const newTask = mapBackendTask(response.data);\n      setTasks([...tasks, newTask]);\n    } catch (err) {\n      var _apiError$response2, _apiError$response2$d;\n      const apiError = err;\n      console.error('Error adding task:', apiError);\n      setError(((_apiError$response2 = apiError.response) === null || _apiError$response2 === void 0 ? void 0 : (_apiError$response2$d = _apiError$response2.data) === null || _apiError$response2$d === void 0 ? void 0 : _apiError$response2$d.message) || 'Failed to add task. Please try again later.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Add a new task\n  const handleAddTask = e => {\n    e.preventDefault();\n    void addTask(task);\n    setTask('');\n  };\n\n  // Toggle the 'done' status of a task via API\n  const toggleTaskDone = async id => {\n    setLoading(true);\n    setError(null);\n    try {\n      // Find the task to toggle\n      const taskToToggle = tasks.find(t => t.id === id);\n      if (!taskToToggle) {\n        console.error('Task not found');\n        setError('Task not found');\n        return;\n      }\n\n      // Update the task via API\n      const response = await axios.put(`${API_URL}/${id}`, {\n        completed: !taskToToggle.done\n      }, getAxiosConfig());\n\n      // Update local state\n      const updatedTask = mapBackendTask(response.data);\n      setTasks(tasks.map(t => t.id === id ? updatedTask : t));\n    } catch (err) {\n      var _apiError$response3, _apiError$response3$d;\n      const apiError = err;\n      console.error('Error toggling task:', apiError);\n      setError(((_apiError$response3 = apiError.response) === null || _apiError$response3 === void 0 ? void 0 : (_apiError$response3$d = _apiError$response3.data) === null || _apiError$response3$d === void 0 ? void 0 : _apiError$response3$d.message) || 'Failed to update task. Please try again later.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Delete a task via API\n  const deleteTask = async id => {\n    setLoading(true);\n    setError(null);\n    try {\n      await axios.delete(`${API_URL}/${id}`, getAxiosConfig());\n      setTasks(tasks.filter(t => t.id !== id));\n    } catch (err) {\n      var _apiError$response4, _apiError$response4$d;\n      const apiError = err;\n      console.error('Error deleting task:', apiError);\n      setError(((_apiError$response4 = apiError.response) === null || _apiError$response4 === void 0 ? void 0 : (_apiError$response4$d = _apiError$response4.data) === null || _apiError$response4$d === void 0 ? void 0 : _apiError$response4$d.message) || 'Failed to delete task. Please try again later.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Values and functions to expose via the context\n  const value = {\n    tasks,\n    task,\n    setTask,\n    handleAddTask,\n    toggleTaskDone,\n    deleteTask,\n    loading,\n    error\n  };\n  return /*#__PURE__*/_jsxDEV(TaskContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 184,\n    columnNumber: 10\n  }, this);\n};\n_s2(TaskProvider, \"IFMxhLUmb194QCgDtxbyozFeo0c=\");\n_c = TaskProvider;\nvar _c;\n$RefreshReg$(_c, \"TaskProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useCallback","axios","jsxDEV","_jsxDEV","API_URL","TaskContext","undefined","useTasks","_s","context","Error","TaskProvider","children","_s2","tasks","setTasks","task","setTask","loading","setLoading","error","setError","getAuthToken","localStorage","getItem","getAxiosConfig","token","headers","Authorization","mapBackendTask","backendTask","id","text","title","done","completed","fetchTasks","response","get","backendTasks","data","frontendTasks","map","err","_apiError$response","_apiError$response$da","apiError","console","message","addTask","trim","post","description","newTask","_apiError$response2","_apiError$response2$d","handleAddTask","e","preventDefault","toggleTaskDone","taskToToggle","find","t","put","updatedTask","_apiError$response3","_apiError$response3$d","deleteTask","delete","filter","_apiError$response4","_apiError$response4$d","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/josemejias/WebstormProjects/jdmqademo/src/context/TaskContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport axios, { AxiosResponse } from 'axios';\nimport { Task, BackendTask, ApiError, AxiosAuthConfig } from '../types';\n\nconst API_URL = '/api/tasks';\n\ninterface TaskContextType {\n  tasks: Task[];\n  task: string;\n  setTask: (task: string) => void;\n  handleAddTask: (e: React.FormEvent<HTMLFormElement>) => void;\n  toggleTaskDone: (id: number) => void;\n  deleteTask: (id: number) => void;\n  loading: boolean;\n  error: string | null;\n}\n\n// Create the context\nexport const TaskContext = createContext<TaskContextType | undefined>(undefined);\n\n// Custom hook to use the context\nexport const useTasks = () => {\n  const context = useContext(TaskContext);\n  if (!context) {\n    throw new Error('useTasks must be used within a TaskProvider');\n  }\n  return context;\n};\n\ninterface TaskProviderProps {\n  children: React.ReactNode;\n}\n\n// Provider component\nexport const TaskProvider: React.FC<TaskProviderProps> = ({ children }) => {\n  const [tasks, setTasks] = useState<Task[]>([]);\n  const [task, setTask] = useState<string>('');\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Get the auth token for API requests\n  const getAuthToken = (): string | null => localStorage.getItem('auth_token');\n\n  // Configure axios with auth token\n  const getAxiosConfig = useCallback((): AxiosAuthConfig => {\n    const token = getAuthToken();\n    return {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n  }, []);\n\n  // Map backend task to frontend task\n  const mapBackendTask = (backendTask: BackendTask): Task => ({\n    id: backendTask.id,\n    text: backendTask.title,\n    done: backendTask.completed\n  });\n\n  // Load tasks from API on initial load\n  useEffect(() => {\n    const fetchTasks = async (): Promise<void> => {\n      setLoading(true);\n      setError(null);\n\n      try {\n        const response: AxiosResponse<BackendTask[]> = await axios.get(API_URL, getAxiosConfig());\n        const backendTasks = response.data;\n        const frontendTasks = backendTasks.map(mapBackendTask);\n        setTasks(frontendTasks);\n      } catch (err) {\n        const apiError = err as ApiError;\n        console.error('Error fetching tasks:', apiError);\n        setError(\n          apiError.response?.data?.message || 'Failed to load tasks. Please try again later.'\n        );\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    void fetchTasks();\n  }, [getAxiosConfig]);\n\n  // Add a new task via API\n  const addTask = async (text: string): Promise<void> => {\n    if (text.trim() === '') return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response: AxiosResponse<BackendTask> = await axios.post(\n        API_URL,\n        { title: text.trim(), description: '' },\n        getAxiosConfig()\n      );\n\n      const newTask = mapBackendTask(response.data);\n      setTasks([...tasks, newTask]);\n    } catch (err) {\n      const apiError = err as ApiError;\n      console.error('Error adding task:', apiError);\n      setError(apiError.response?.data?.message || 'Failed to add task. Please try again later.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Add a new task\n  const handleAddTask = (e: React.FormEvent<HTMLFormElement>): void => {\n    e.preventDefault();\n    void addTask(task);\n    setTask('');\n  };\n\n  // Toggle the 'done' status of a task via API\n  const toggleTaskDone = async (id: number): Promise<void> => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      // Find the task to toggle\n      const taskToToggle = tasks.find(t => t.id === id);\n      if (!taskToToggle) {\n        console.error('Task not found');\n        setError('Task not found');\n        return;\n      }\n\n      // Update the task via API\n      const response: AxiosResponse<BackendTask> = await axios.put(\n        `${API_URL}/${id}`,\n        { completed: !taskToToggle.done },\n        getAxiosConfig()\n      );\n\n      // Update local state\n      const updatedTask = mapBackendTask(response.data);\n      setTasks(tasks.map(t => (t.id === id ? updatedTask : t)));\n    } catch (err) {\n      const apiError = err as ApiError;\n      console.error('Error toggling task:', apiError);\n      setError(\n        apiError.response?.data?.message || 'Failed to update task. Please try again later.'\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Delete a task via API\n  const deleteTask = async (id: number): Promise<void> => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      await axios.delete<void>(`${API_URL}/${id}`, getAxiosConfig());\n      setTasks(tasks.filter(t => t.id !== id));\n    } catch (err) {\n      const apiError = err as ApiError;\n      console.error('Error deleting task:', apiError);\n      setError(\n        apiError.response?.data?.message || 'Failed to delete task. Please try again later.'\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Values and functions to expose via the context\n  const value = {\n    tasks,\n    task,\n    setTask,\n    handleAddTask,\n    toggleTaskDone,\n    deleteTask,\n    loading,\n    error\n  };\n\n  return <TaskContext.Provider value={value}>{children}</TaskContext.Provider>;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}